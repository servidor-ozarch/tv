<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Player Seguro</title>
<style>
html, body {
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  background:#000;
  overflow:hidden;
  font-family:system-ui,sans-serif;
}
#playerWrap {
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100vh;
  z-index:100;
}
iframe {
  width:100%;
  height:100%;
  border:0;
}
#denied {
  position:fixed;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  background:#000;
  color:#fff;
  z-index:200;
  text-align:center;
}
.hide {display:none}
</style>
</head>
<body>

<div id="denied">
  <h1>⚠️ ACESSO NEGADO</h1>
  <p>Acesso fechado até o próximo jogo.<br>Insira um token válido.</p>
</div>

<div id="playerWrap"></div>

<!-- ========================= -->
<!-- Blocos SHA-1 do PLAYER -->
<!-- ========================= -->
<div id="p1" class="hide">https</div>
<div id="p2" class="hide">://</div>
<div id="p3" class="hide">rdc</div>
<div id="p4" class="hide">play</div>
<div id="p5" class="hide">.live</div>
<div id="p6" class="hide">/prime/</div>
<div id="p7" class="hide">premiereclubes</div>
<div id="p8" class="hide">.html</div>

<!-- ========================= -->
<!-- Blocos SHA-1 do TOKEN -->
<!-- ========================= -->
<div id="t1" class="hide">tokens</div>
<div id="t2" class="hide">.txt</div>
<div id="t3" class="hide">/</div> <!-- pasta onde está o arquivo -->
<div id="t4" class="hide">tv</div> <!-- nome da pasta -->
<div id="t5" class="hide">/</div>
<div id="t6" class="hide">test</div> <!-- prefixo ou nome fictício -->
<!-- blocos falsos para confundir -->
<div id="f1" class="hide">abc</div>
<div id="f2" class="hide">xyz</div>

<script>
(async function(){
  function getBlock(id){ return document.getElementById(id).innerText; }

  // Reconstruir PLAYER_URL
  const playerOrder = ["p1","p2","p3","p4","p5","p6","p7","p8"];
  const PLAYER_URL = playerOrder.map(getBlock).join("");

  // Reconstruir TOKEN_URL relativo
  const tokenOrder = ["t4","t3","t6","t5","t1","t2"];
  const TOKEN_URL = tokenOrder.map(getBlock).join("");

  const params = new URLSearchParams(window.location.search);
  const token = (params.get('token')||'').trim();

  const deniedEl = document.getElementById('denied');
  const playerWrap = document.getElementById('playerWrap');

  if(!token) return; // mantém negado

  // Fetch do token local camuflado
  let validTokens = [];
  try {
    const r = await fetch(TOKEN_URL, {cache:'no-store'});
    if(r.ok){
      const txt = await r.text();
      validTokens = txt.split(/\r?\n/).map(s=>s.trim()).filter(Boolean);
    }
  } catch(e){
    console.error("Erro ao buscar lista de tokens:", e);
  }

  if(!validTokens.includes(token)) return; // token inválido

  // Token válido → libera player
  deniedEl.style.display = 'none';

  const iframe = document.createElement('iframe');
  iframe.src = PLAYER_URL + "?token=" + encodeURIComponent(token);
  iframe.allow = "autoplay; encrypted-media; picture-in-picture";
  iframe.allowFullscreen = true;

  playerWrap.appendChild(iframe);
})();
</script>

</body>
</html>

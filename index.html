<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>PREMIERE</title>

<meta http-equiv="Content-Security-Policy" content="
  default-src 'self';
  base-uri 'none';
  object-src 'none';
  frame-ancestors 'self';
  navigate-to 'self';
  form-action 'none';
  frame-src https://rdcplay.live;
  media-src https://rdcplay.live;
  img-src 'self' data: https://rdcplay.live;
  connect-src 'self' https://rdcplay.live;
  script-src 'self' 'unsafe-inline';
  style-src 'self' 'unsafe-inline';
">

<style>
  body {
    margin: 0;
    background: black;
    height: 100vh;
    overflow: hidden;
    color: #eee;
    font-family: system-ui, sans-serif;
  }
  iframe {
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 100%; height: 100vh;
    border: none;
  }
  /* Tela de acesso negado */
  .denied {
    position: fixed; inset: 0;
    display: flex; flex-direction: column;
    justify-content: center; align-items: center;
    background: radial-gradient(circle at top, #111, #000);
    text-align: center;
    padding: 20px;
  }
  .denied h1 {
    font-size: 1.6rem;
    margin-bottom: 10px;
    color: #ef4444;
  }
  .denied p {
    font-size: 1rem;
    color: #aaa;
    max-width: 600px;
  }
</style>
</head>
<body>

<!-- Player (inicialmente escondido) -->
<div id="player" hidden>
  <iframe
    src="https://rdcplay.live/prime/premiereclubes.html"
    allow="autoplay; encrypted-media; picture-in-picture"
    allowfullscreen
    sandbox="allow-scripts allow-same-origin allow-presentation"
    referrerpolicy="no-referrer"
    frameborder="0">
  </iframe>
</div>

<!-- Mensagem de acesso negado (visível até validar token) -->
<div id="denied" class="denied">
  <h1>⚠️ ACESSO NEGADO</h1>
  <p>O operador fechou o acesso deste canal até o próximo jogo.<br>
     Novos acessos serão liberados nos <b>stores do WhatsApp</b>.</p>
</div>

<script>
(function(){
  const qs = new URLSearchParams(location.search);
  const rawToken = (qs.get('token') || '').trim();

  // valida formato básico
  const token = /^[A-Za-z0-9]{8,128}$/.test(rawToken) ? rawToken : '';

  if (!token) return; // permanece negado

  fetch('tokens.txt', {cache:'no-store'})
    .then(r => r.ok ? r.text() : '')
    .then(txt => {
      const list = txt.split(/\r?\n/).map(l => l.trim()).filter(Boolean);
      if (list.includes(token)) {
        document.getElementById('denied').hidden = true;
        document.getElementById('player').hidden = false;
      }
    })
    .catch(() => {});
})();
</script>

</body>
</html>